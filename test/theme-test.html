<!doctype html>

<head>
  <meta charset="UTF-8">
  <title>vaadin-chart tests</title>
  <script src="../../web-component-tester/browser.js"></script>
  <link rel="import" href="../vaadin-chart.html">
</head>

<body>
  <test-fixture id="pie-with-labels">
    <template>
      <vaadin-chart id="mychart" title="Custom Title" subtitle="Custom Subtitle">
        <vaadin-chart-series type="pie" title="Tokyo" values="[19,12,9,24,5]" value-labels='["Mon", "Tue", "Wed", "Thur", "Fri"]'></vaadin-chart-series>
      </vaadin-chart>
    </template>
  </test-fixture>

  <script>
    describe('Test defaults in theme', function() {
      var chart;

      beforeEach(done => {
        HTMLImports.whenReady(() => {
          chart = fixture('pie-with-labels').$.chart;
          window.defer(() => done());
        });
      });

      it('data label connectors should have no fill', function(done) {
        window.defer(() => {
          const connectors = Array.from(chart.querySelectorAll('.highcharts-data-label-connector'));
          expect(connectors).to.have.lengthOf(5);
          connectors.forEach(connector => expect(window.getComputedStyle(connector).fill).to.equal('none'));
          done();
        });
      });

    });
  </script>
</body>