<!doctype html>

<head>
  <meta charset="UTF-8">
  <title>vaadin-chart tests</title>
  <script src="../../web-component-tester/browser.js"></script>
  <link rel="import" href="../vaadin-chart.html">
</head>

<body>
  <test-fixture id="theme">
    <template>
      <vaadin-chart>
      </vaadin-chart>
    </template>
  </test-fixture>

  <script>
    describe('Test defaults in theme', function() {
      var chart;

      beforeEach(done => {
        chart = fixture('theme');
        Polymer.flush();
        setTimeout(() => {
          done();
        }, 100);
      });


      it('data label connectors should have no fill', function(done) {
        const check = () => {
          const chartContainer = chart.$.chart;
          const connectors = Array.from(chartContainer.querySelectorAll('.highcharts-data-label-connector'));
          expect(connectors).to.have.lengthOf(3);
          connectors.forEach(connector => expect(window.getComputedStyle(connector).fill).to.equal('none'));
          done();
        };
        chart.update({
          series: [{
            type: 'pie',
            data: [29.9, 71.5, 50],
            events: {
              afterAnimate: check
            }
          }]
        });
      });

      it('should hide charts by adding hidden attribute', function() {
        const chartVisibleSize = chart.getBoundingClientRect();
        expect(chartVisibleSize.width).to.be.above(0);
        expect(chartVisibleSize.height).to.be.above(0);

        chart.hidden = true;
        const chartHiddenSize = chart.getBoundingClientRect();
        expect(chartHiddenSize.width).to.be.equal(0);
        expect(chartHiddenSize.height).to.be.equal(0);
      });

    });
  </script>
</body>
