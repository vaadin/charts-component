<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <script src="../../webcomponentsjs/webcomponents-lite.min.js"></script>
    <script src="../../web-component-tester/browser.js"></script>

    <link rel="import" href="../v-chart.html">

</head>
<body>
<dom-module id="binding-chart">
    <template>
        <v-chart id="chart-with-binding">
            <vc-title>Global temperature change</vc-title>
            <vc-subtitle>Data input from CSV</vc-subtitle>

            <vc-plot-options>
                <vc-series>
                    <vc-marker vc-enabled="false"></vc-marker>
                </vc-series>
            </vc-plot-options>
            <vc-x-axis vc-type="datetime"></vc-x-axis>
            <v-series id="my-series-id" vc-data="[[seriesData]]" vc-line-width="1"></v-series>

        </v-chart>
    </template>
    <script>
        (function () {
            HTMLImports.whenReady(function () {
                Polymer({
                    is: 'binding-chart',
                    properties: {
                        seriesData: {
                            type: Array,
                            value: [
                                [1183939200000, 40.71],
                                [1184025600000, 40.38],
                                [1184112000000, 40.82],
                                [1184198400000, 47.55],
                                [1184284800000, 41.18],
                                [1184544000000, 41.06],
                                [1184630400000, 41.47]]
                        }
                    }
                });
            });
        })();
    </script>

</dom-module>
<binding-chart id="test-component">

</binding-chart>

<script>

    suite('<v-chart>', function () {

        test('data property binding', function () {
            var chartwc = document.querySelector('#chart-with-binding');
            var conf = chartwc._chartConf;
            expect(conf.series).to.exist;
            expect(conf.series).not.to.be.empty;
            expect(conf.series[0].data).to.exist;
            expect(conf.series[0].data).not.to.be.empty;
            expect(conf.series[0].data).to.have.length(7);
            expect(conf.series[0].data[1][0]).to.equal(1184025600000);
            expect(conf.series[0].data[1][1]).to.equal(40.38);

        });
    });

</script>

</body>
</html>