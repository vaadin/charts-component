<dom-module id="date-axis-and-click-event-example">
    <template>
        <v-chart id="dateAxisAndClickEvent" type="spline" on-chart-click="chartClickListener"
                 on-point-click="pointClickListener">
            <vc-title>Date axis and click events</vc-title>

            <vc-x-axis type="datetime"></vc-x-axis>
            <vc-legend enabled="false"></vc-legend>

            <data-series>
                <vc-data>
                    <vc-point>
                        <vc-date>2013-02-11T12:00</vc-date>
                        <vc-y>71.5</vc-y>
                    </vc-point>
                    <vc-point>
                        <vc-date>2013-02-11T12:05</vc-date>
                        <vc-y>29.9</vc-y>
                    </vc-point>
                    <vc-point>
                        <vc-date>2013-02-11T12:10</vc-date>
                        <vc-y>106.4</vc-y>
                    </vc-point>
                </vc-data>
            </data-series>
        </v-chart>
    </template>

    <script>
        Polymer({
            is: 'date-axis-and-click-event-example',

            chartClickListener: function (e) {
                //get the Highcharts event with chart specific details
                var originalEvent = e.detail.originalEvent;

                var xValue = originalEvent.xAxis[0].value,
                        yValue = originalEvent.yAxis[0].value,
                        xPixels = originalEvent.xAxis[0].axis.toPixels(xValue),
                        yPixels = originalEvent.yAxis[0].axis.toPixels(yValue),
                        dateFormatted = Highcharts.dateFormat('%Y-%m-%d %H:%M:%S', xValue),
                        yFormatted = Highcharts.numberFormat(yValue, 2);
                this.showLabel('Chart click: x: ' + dateFormatted + ', y: ' + yFormatted, xPixels, yPixels);
            },

            pointClickListener: function (e) {
                //get the Highcharts event with chart specific details
                var originalEvent = e.detail.originalEvent;
                var point = e.detail.point;

                var xPixels = originalEvent.chartX,
                        yPixels = originalEvent.chartY,
                        dateFormatted = Highcharts.dateFormat('%Y-%m-%d %H:%M:%S', point.x);
                this.showLabel('Point click: x: ' + dateFormatted + ', y: ' + point.y, xPixels, yPixels);

            },

            showLabel: function (message, xPixels, yPixels) {
                var label = this.$.dateAxisAndClickEvent.chart.renderer.label(message, xPixels, yPixels)
                        .attr({
                            fill: Highcharts.getOptions().colors[2],
                            padding: 10,
                            r: 5,
                            zIndex: 8
                        })
                        .css({
                            color: '#FFFFFF'
                        })
                        .add();
                this.async(function () {
                    label.fadeOut();
                }, 1000);
            }
        });
    </script>
</dom-module>
<date-axis-and-click-event-example></date-axis-and-click-event-example>
